{% extends 'base.html' %}
{% block header %}
All Videos
{% endblock %}


{% block content %}
<div style="display:flex; flex-direction:column;">
    
    <!-- <div class="vid-container"> -->
        split into columns for each video
        {% for video in videos: %}
        <div class="card my-3" style="width: 60%; margin: 0 auto;">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <div>
                            <video height="400" controls>
                                <source src="https://engr-4450-fp.s3.us-east-2.amazonaws.com/{{ video['video_s3_path'] }}" type="video/mp4">
                            </video>    
                        </div>
                    </div>
                    <div class="col">
                        <div style="border: 2px solid green; display:flex; flex-direction:row;">
                            <!-- <img alt="userIcon"/> -->
                            <p>user-{{ video['uploader_id'] }}--</p>
                            <p>likes-{{ video['num_likes'] }}--</p>
                            <p>video-{{ video['vid_id'] }}--</p>
                            {% if video['vid_id'] in likes %}
                            <form action="{{url_for('live.unlike_video', video_id=video['vid_id'])}}" method="post">
                                <input type="hidden" value="{{ video['vid_id'] }}"/>
                                <button type="submit">Unlike Video</button>
                            </form> 
                            {% else %}
                            <form action="{{url_for('live.like_video', video_id=video['vid_id'])}}" method="post">
                                <input type="hidden" value="{{ video['vid_id'] }}"/>
                                <button type="submit">Like Video</button>
                            </form>
                            {% endif %}
                        </div>
                            {% for comment in comments[video['vid_id']]: %}    
                                <p>{{ comment["user_id"] }}: {{ comment["comment_text"] }}</p>
                            {% endfor %}
                        
                        <!-- <p>add somethign for zero comments</p> -->
                        <form action="{{url_for('live.submit_video_comment')}}" method="post">
                            <input type="hidden" value="{{ video['vid_id'] }}" name="vid_id"/>
                            <input type="hidden" id="user_id_val" name="user_id" value={{ session['user_id'] }}>
                            <input type="text" name="comment_text" />
                            <button type="submit">Post</button> <!-- convert this to either ajax or socketio -->
                        </form>
                    </div>
                </div>
                
              <div class="vid-block" >
                <div style="display: flex; flex-direction: row; justify-content:center;">
                    <div>
                        <video height="400" controls>
                            <source src="https://engr-4450-fp.s3.us-east-2.amazonaws.com/{{ video['video_s3_path'] }}" type="video/mp4">
                        </video>    
                    </div>
                    <div class="comment-block" style="border: 2px solid black">
                        <div style="border: 2px solid green; display:flex; flex-direction:row;">
                            <!-- <img alt="userIcon"/> -->
                            <p>user-{{ video['uploader_id'] }}--</p>
                            <p>likes-{{ video['num_likes'] }}--</p>
                            <p>video-{{ video['vid_id'] }}--</p>
                            {% if video['vid_id'] in likes %}
                            <form action="{{url_for('live.unlike_video', video_id=video['vid_id'])}}" method="post">
                                <input type="hidden" value="{{ video['vid_id'] }}"/>
                                <button type="submit">Unlike Video</button>
                            </form> 
                            {% else %}
                            <form action="{{url_for('live.like_video', video_id=video['vid_id'])}}" method="post">
                                <input type="hidden" value="{{ video['vid_id'] }}"/>
                                <button type="submit">Like Video</button>
                            </form>
                            {% endif %}
                        </div>
                            {% for comment in comments[video['vid_id']]: %}    
                                <p>{{ comment["user_id"] }}: {{ comment["comment_text"] }}</p>
                            {% endfor %}
                        
                        <!-- <p>add somethign for zero comments</p> -->
                        <form action="{{url_for('live.submit_video_comment')}}" method="post">
                            <input type="hidden" value="{{ video['vid_id'] }}" name="vid_id"/>
                            <input type="hidden" id="user_id_val" name="user_id" value={{ session['user_id'] }}>
                            <input type="text" name="comment_text" />
                            <button type="submit">Post</button> <!-- convert this to either ajax or socketio -->
                        </form>
                    </div>
                </div>
            </div>
        </div>            
    </div>
    {% endfor %}
    <!-- </div> -->
</div>
{% endblock %}